<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Focus">
<meta property="og:type" content="website">
<meta property="og:title" content="Eric&#39;s Blog">
<meta property="og:url" content="http://shaorui23.github.io/index.html">
<meta property="og:site_name" content="Eric&#39;s Blog">
<meta property="og:description" content="Focus">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eric&#39;s Blog">
<meta name="twitter:description" content="Focus">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://shaorui23.github.io/"/>





  <title>Eric's Blog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Eric's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shaorui23.github.io/2016/07/12/如何用-Go-写-Ruby/如何用-Go-写-Ruby/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/672563?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eric's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/12/如何用-Go-写-Ruby/如何用-Go-写-Ruby/" itemprop="url">如何用-Go-写-Ruby</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-12T10:45:04+08:00">
                2016-07-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/07/12/如何用-Go-写-Ruby/如何用-Go-写-Ruby/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/12/如何用-Go-写-Ruby/如何用-Go-写-Ruby/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span itemprop="articleBody"></span></p>
<p>Go 学习笔记，持续更新。 原文请参考: <a href="http://kimh.github.io/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/" target="_blank" rel="external">http://kimh.github.io/blog/en/go/how-can-i-do-x-in-ruby-with-go-part-1/</a></p>
<h3 id="Create-Array"><a href="#Create-Array" class="headerlink" title="Create Array"></a><a href="#Create-Array" title="Create Array"></a>Create Array</h3><p>Ruby:  </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">numbers</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="attr">fruits</span> = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"grape"</span>]</div></pre></td></tr></table></figure>
<p>Go:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">numbers := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</div><div class="line">fruits := []<span class="keyword">string</span>&#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"grape"</span>&#125;</div></pre></td></tr></table></figure>
<h3 id="Append-an-element-to-array"><a href="#Append-an-element-to-array" class="headerlink" title="Append an element to array"></a><a href="#Append-an-element-to-array" title="Append an element to array"></a>Append an element to array</h3><p>Ruby:  </p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line">numbers &lt;&lt; <span class="number">4</span></div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">numbers := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</div><div class="line">numbers.<span class="built_in">append</span>(numbers, <span class="number">4</span>)</div></pre></td></tr></table></figure>
<h3 id="Concatenate-arryas"><a href="#Concatenate-arryas" class="headerlink" title="Concatenate arryas"></a><a href="#Concatenate-arryas" title="Concatenate arryas"></a>Concatenate arryas</h3><p>Ruby:  </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="attr">numbers1</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line"><span class="attr">numbers2</span> = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</div><div class="line"><span class="attr">numbers1</span> = numbers1 + numbers2</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">numbers1 := []int&#123;1,2,3&#125;</div><div class="line">numbers2 := []int&#123;4,5,6&#125;</div><div class="line">numbers1 = append(numbers1, numbers2...)</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">numbers1 := []int&#123;1,2,3&#125;</div><div class="line">numbers1 = append(numbers1, 4, 5, 6)</div></pre></td></tr></table></figure>
<h3 id="Create-multi-dimension-array"><a href="#Create-multi-dimension-array" class="headerlink" title="Create multi dimension array"></a><a href="#Create-multi-dimension-array" title="Create multi dimension array"></a>Create multi dimension array</h3><p>Ruby:  </p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">multi_array = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">multi_array := [][]int&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;</div></pre></td></tr></table></figure>
<h3 id="Create-empty-array"><a href="#Create-empty-array" class="headerlink" title="Create empty array"></a><a href="#Create-empty-array" title="Create empty array"></a>Create empty array</h3><p>Ruby:  </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">array</span> = []</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">array</span> := []<span class="keyword">int</span></div></pre></td></tr></table></figure>
<h3 id="Iterate-an-array"><a href="#Iterate-an-array" class="headerlink" title="Iterate an array"></a><a href="#Iterate-an-array" title="Iterate an array"></a>Iterate an array</h3><p>Ruby:  </p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</div><div class="line">numbets.each &#123;|num| puts num &#125;</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">numbers := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> _, num := <span class="keyword">range</span> numbers &#123;</div><div class="line">  fmt.Println(num)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Looping-N-times"><a href="#Looping-N-times" class="headerlink" title="Looping N times"></a><a href="#Looping-N-times" title="Looping N times"></a>Looping N times</h3><p>Ruby:  </p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">5.</span>times &#123;|<span class="type">num</span>| <span class="type">puts</span> num&#125;</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> <span class="built_in">num</span> := <span class="number">0</span>; <span class="built_in">num</span> &lt; <span class="number">5</span>; <span class="built_in">num</span> ++ &#123;</div><div class="line">  fmt.Println(<span class="built_in">num</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Clone-array"><a href="#Clone-array" class="headerlink" title="Clone array"></a><a href="#Clone-array" title="Clone array"></a>Clone array</h3><p>Ruby:  </p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span><span class="type">_array</span> = old_array.clone</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">new_array := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="built_in">len</span>(old_array))</div><div class="line"></div><div class="line"><span class="built_in">copy</span>(new_array, old_array)</div></pre></td></tr></table></figure>
<h3 id="Accessing-elements-of-array-by-range"><a href="#Accessing-elements-of-array-by-range" class="headerlink" title="Accessing elements of array by range"></a><a href="#Accessing-elements-of-array-by-range" title="Accessing elements of array by range"></a>Accessing elements of array by range</h3><p>Ruby:  </p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</div><div class="line">numbers[<span class="number">0.</span><span class="number">.3</span>]</div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">go_array := []int&#123;1,2,3,4&#125;</div><div class="line"><span class="section">go_array[0:4]</span></div></pre></td></tr></table></figure>
<h3 id="Compare-array"><a href="#Compare-array" class="headerlink" title="Compare array"></a><a href="#Compare-array" title="Compare array"></a>Compare array</h3><p>Ruby:  </p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> array1 == array2</div><div class="line">  puts <span class="string">"Same array"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">go_array := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</div><div class="line">bb_array := []<span class="keyword">int</span>&#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</div><div class="line"></div><div class="line">same := <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> i, ele := <span class="keyword">range</span> go_array &#123;</div><div class="line">  <span class="keyword">if</span> bb_array[i] != ele &#123;</div><div class="line">    same = <span class="literal">false</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> same == <span class="literal">true</span> &#123;</div><div class="line">  fmt.Println(<span class="string">"Same slice"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Check-if-array-include-an-element"><a href="#Check-if-array-include-an-element" class="headerlink" title="Check if array include an element"></a><a href="#Check-if-array-include-an-element" title="Check if array include an element"></a>Check if array include an element</h3><p>Ruby:  </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fruits = [<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"grape"</span>]</div><div class="line"></div><div class="line"><span class="keyword">if</span> fruits.<span class="keyword">include</span>?(<span class="string">"apple"</span>)</div><div class="line">  puts <span class="string">"include!"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">include := <span class="literal">false</span></div><div class="line">fruits := []<span class="keyword">string</span>&#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"grape"</span>&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> _, ele := <span class="keyword">range</span> fruits &#123;</div><div class="line">  <span class="keyword">if</span> ele == <span class="string">"apple"</span> &#123;</div><div class="line">    include = <span class="literal">true</span></div><div class="line">    <span class="keyword">break</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> include == <span class="literal">true</span> &#123;</div><div class="line">  fmt.Println(<span class="string">"Included"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Define-a-method-with-variable-length-argument"><a href="#Define-a-method-with-variable-length-argument" class="headerlink" title="Define a method with variable length argument"></a><a href="#Define-a-method-with-variable-length-argument" title="Define a method with variable length argument"></a>Define a method with variable length argument</h3><p>Ruby:  </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(*args)</span></span></div><div class="line">  args.each &#123;<span class="params">|arg|</span> puts arg&#125;</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">foo</span><span class="params">(arguments ...<span class="keyword">int</span>)</span></span> &#123;</div><div class="line">	<span class="keyword">for</span> _, arg := <span class="keyword">range</span> arguments &#123;</div><div class="line">		fmt.Println(arg)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">foo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div></pre></td></tr></table></figure>
<h3 id="Nil-checking"><a href="#Nil-checking" class="headerlink" title="Nil checking"></a><a href="#Nil-checking" title="Nil checking"></a>Nil checking</h3><p>Ruby:  </p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">val</span>.<span class="literal">nil</span>?</div><div class="line">  puts <span class="string">"val is nil"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Go:  </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> str string</div><div class="line"></div><div class="line"><span class="keyword">if</span> str ==<span class="string">""</span> &#123;</div><div class="line">  fmt.Println(<span class="string">"str is empty"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">var</span> <span class="selector-tag">i</span> int</div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="selector-tag">i</span> == <span class="number">0</span> &#123;</div><div class="line">  fmt.Println(<span class="string">"i is zero"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shaorui23.github.io/2015/06/01/Responsive-Web-Design-Study-Case/Responsive-Web-Design-Study-Case/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/672563?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eric's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/01/Responsive-Web-Design-Study-Case/Responsive-Web-Design-Study-Case/" itemprop="url">Responsive-Web-Design-Study-Case</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-06-01T11:14:38+08:00">
                2015-06-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2015/06/01/Responsive-Web-Design-Study-Case/Responsive-Web-Design-Study-Case/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/01/Responsive-Web-Design-Study-Case/Responsive-Web-Design-Study-Case/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Responsive-Web-Design-学习用例"><a href="#Responsive-Web-Design-学习用例" class="headerlink" title="Responsive Web Design 学习用例"></a>Responsive Web Design 学习用例</h2><p>“RWD的概念”: 响应式网页设计能让不同大小的设备上呈现同样的网页内容。”一次设计，普遍适用”的概念让网站开发可以不用专门为手机做一套定制版本，减少维护和内容适配的问题。下面是来自百度百科的关于“响应式Web设计(Responsive Web design)”的理念：</p>
<blockquote>
<p>页面的设计与开发应当根据用户行为以及设备环境(系统平台、屏幕尺寸、屏幕定向等)进行相应的响应和调整。具体的实践方式由多方面组成，包括弹性网格和布局、图片、CSS media query的使用等。无论用户正在使用笔记本还是iPad，我们的页面都应该能够自动切换分辨率、图片尺寸及相关脚本功能等，以适应不同设备；换句话说，页面应该有能力去自动响应用户的设备环境。响应式网页设计就是一个网站能够兼容多个终端——而不是为每个终端做一个特定的版本。这样，我们就可以不必为不断到来的新设备做专门的版本设计和开发了。</p>
</blockquote>
<p>接下来通过下面一个例子来逐步学习RWD。</p>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Responsive Demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"index.css"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="CSS-代码"><a href="#CSS-代码" class="headerlink" title="CSS-代码"></a>CSS-代码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">* &#123;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">0px</span>;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">0px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span>,</div><div class="line"><span class="selector-class">.content</span>,</div><div class="line"><span class="selector-class">.footer</span> &#123;</div><div class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> auto;</div><div class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span> &#123;</div><div class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#D2691E</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.left</span>,</div><div class="line"><span class="selector-class">.middle</span>,</div><div class="line"><span class="selector-class">.right</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#6495ED</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.left</span>,</div><div class="line"><span class="selector-class">.middle</span> &#123;</div><div class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.footer</span> &#123;</div><div class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#5F9D88</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>“自适应网页设计”的核心是CSS3引入了<a href="http://www.w3.org/TR/CSS21/media.html" target="_blank" rel="external">Media Query</a>模块。能够通过检测屏幕宽度的像素加载相应的css代码。例如，屏幕宽度的最小像素在980以上，则显示header + 3 columns +<br>footer 效果：</p><p></p>
<p><img src="/images/fullscreen.png"></p>

<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (min-width: <span class="number">980px</span>) &#123;</div><div class="line">  <span class="selector-class">.header</span>,</div><div class="line">  <span class="selector-class">.content</span>,</div><div class="line">  <span class="selector-class">.footer</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">960px</span></div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.left</span>,</div><div class="line">  <span class="selector-class">.middle</span>,</div><div class="line">  <span class="selector-class">.right</span> &#123;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.left</span>,</div><div class="line">  <span class="selector-class">.right</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">220px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.middle</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.content</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">500px</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果屏幕宽度的像素在600到980之间，则显示header + 2 columns + footer，隐藏第三行column：</p><br><p><img src="/images/twocolumns.png" alt="two columns"></p>

<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (min-width: <span class="number">600px</span>) and (max-width: <span class="number">980px</span>) &#123;</div><div class="line">  <span class="selector-class">.header</span>,</div><div class="line">  <span class="selector-class">.content</span>,</div><div class="line">  <span class="selector-class">.footer</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">600px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.left</span>,</div><div class="line">  <span class="selector-class">.middle</span> &#123;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.right</span> &#123;</div><div class="line">    <span class="attribute">display</span>: none;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.left</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.middle</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">380px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.content</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后到了适配手机版本的屏幕了。这时我们出来像素宽度从400到600的界面，变成一个类似“汉堡”的排列样式：</p><br><p><img src="/images/hanburger.png" alt="hanburger"></p>

<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">media</span> screen and (min-width: <span class="number">400px</span>) and (max-width: <span class="number">600px</span>) &#123;</div><div class="line">  <span class="selector-class">.header</span>,</div><div class="line">  <span class="selector-class">.content</span>,</div><div class="line">  <span class="selector-class">.footer</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.left</span>,</div><div class="line">  <span class="selector-class">.right</span>,</div><div class="line">  <span class="selector-class">.middle</span> &#123;</div><div class="line">    <span class="attribute">float</span>: left;</div><div class="line">    <span class="attribute">margin-bottom</span>: <span class="number">5px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="selector-class">.content</span> &#123;</div><div class="line">    <span class="attribute">height</span>: <span class="number">310px</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>上面是比较简单的操作用例，下面是工作中通过模仿上面的用例重构的网站。思路大同小异，只是需要重新设计一个导航条。默认的大屏幕下的导航条在小屏幕下不显示，反而加载“汉堡导航”。当然了，RWD的设计固然能够同时整合pc和mobile的要求，它同时也会引起性能问题。试想同样的html/js/css/images等资源也一遍加载到mobile上，手机的显示速度也会打折扣。</p>
<h3 id="大屏幕下的原始网站"><a href="#大屏幕下的原始网站" class="headerlink" title="大屏幕下的原始网站"></a>大屏幕下的原始网站</h3><p><img src="/images/asicsfullscreen.png" alt="asicsfullscreen"></p>
<h3 id="手机和小屏幕版本的网站"><a href="#手机和小屏幕版本的网站" class="headerlink" title="手机和小屏幕版本的网站"></a>手机和小屏幕版本的网站</h3><p><img src="/images/asics.png"><br><img src="/images/navigation.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shaorui23.github.io/2013/04/22/case-of-study-for-redis/case-of-study-for-redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/672563?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eric's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/04/22/case-of-study-for-redis/case-of-study-for-redis/" itemprop="url">case-of-study-for-redis</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2013-04-22T23:33:09+08:00">
                2013-04-22
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2013/04/22/case-of-study-for-redis/case-of-study-for-redis/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/04/22/case-of-study-for-redis/case-of-study-for-redis/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span itemprop="articleBody"></span></p>
<p>Read <a href="http://theplant.jp/en/blogs/12-techforce-a-case-study-of-redis" target="_blank" rel="external">Theplant Blog</a></p>
<h2 id="TechForce-A-case-study-of-Redis"><a href="#TechForce-A-case-study-of-Redis" class="headerlink" title="TechForce: A case study of Redis"></a><a href="#TechForce-A-case-study-of-Redis" title="TechForce: A case study of Redis"></a>TechForce: A case study of Redis</h2><p><code>Redis</code> is one of the open source projects I’m currently most interested in.As a key-value store, Redis has the abillity to store data via its datatypes. In this article I will try to show the process of how we design and implement a simple clone of Twitter written using Ruby and Redis as only database.</p>
<p>Here is a screenshot of the application:</p>
<p><img src="/images/case-1.png" alt=""></p>
<p>Our Twitter case is structurally simple. It mainly contains three features for the user: add friends, remove friends and post a tweet. We have only five people in our “world” and each person can get others’ tweets by adding them as friends.</p>
<p>Through this simple application, we will learn how to construct a key and use appropriate data types to store values.</p>
<p>Now, let me walk you through the main concepts of this application.</p>
<h2 id="RubyGem-about-Redis"><a href="#RubyGem-about-Redis" class="headerlink" title="RubyGem about Redis"></a><a href="#RubyGem-about-Redis" title="RubyGem about Redis"></a>RubyGem about Redis</h2><p>In this application, I use “redis-rb” gem, a Ruby client library for<br>Redis, to match Redis’ API one-to-one while still providing an idiomatic<br>interface. It features thread-safety, client-side sharding, pipelining,<br>and an obsession for performance. Here’s the link to visit this project: [Redis][<a href="https://github.com/redis/redis-rb" target="_blank" rel="external">https://github.com/redis/redis-rb</a>]</p>
<p>You can connect to Redis by instantiating the ‘Redis’ class:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>  <span class="string">"redis"</span></div><div class="line">redis = Redis.new(:<span class="function"><span class="params">host</span> =&gt;</span> <span class="string">"127.0.0.1"</span>, :<span class="function"><span class="params">port</span> =&gt;</span> <span class="number">6379</span>)</div></pre></td></tr></table></figure>
<h2 id="Data-Structure"><a href="#Data-Structure" class="headerlink" title="Data Structure"></a><a href="#Data-Structure" title="Data Structure"></a>Data Structure</h2><p>Design a table to store values is easy for a relational database. But We don’t have tables now, so we should designed structure to store a value and identify what keys are needed to represent our objects.</p>
<p>Let’s start from Users. We need to represent these users of course, with the username, userid, followers and following users, and so on. Like relational databases, it’s a good solution to associate a unique ID to every user to identify users inside our system. Every other reference to this user will be made by id.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">INCR UserID =&gt; <span class="number">1000</span></div><div class="line">SET <span class="string">user:</span><span class="string">id:</span><span class="number">1000</span>:username theplant</div><div class="line">SET <span class="string">username:</span><span class="string">theplant:</span><span class="string">user:</span>id <span class="number">1000</span></div></pre></td></tr></table></figure>
<h3 id="The-core-code-for-constructing-Users"><a href="#The-core-code-for-constructing-Users" class="headerlink" title="The core code for constructing Users:"></a><a href="#The-core-code-for-constructing-Users" title="The core code for constructing Users:"></a>The core code for constructing Users:</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_user</span><span class="params">(redis)</span></span></div><div class="line">  redis.set(<span class="string">"user:uid"</span>, <span class="number">1000</span>)</div><div class="line">  username = <span class="string">%W[Eric Yuan Binku Lancee Juice]</span></div><div class="line">  username.each <span class="keyword">do</span> <span class="params">|name|</span></div><div class="line">    user_id = Redis.current.incr(<span class="string">"user:uid"</span>) </div><div class="line">    redis.set(<span class="string">"user:id:<span class="subst">#&#123;user_id&#125;</span>:username"</span>, name)</div><div class="line">    redis.set(<span class="string">"username:<span class="subst">#&#123;name&#125;</span>:user:id"</span>, user_id)</div><div class="line">    redis.rpush(<span class="string">"users"</span>, user_id)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="Following-followers"><a href="#Following-followers" class="headerlink" title="Following, followers"></a><a href="#Following-followers" title="Following, followers"></a>Following, followers</h2><p>Redis data type “Set” is a perfect data structure to save these values. Every user has followers and users that they are following.</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">User:id:1000:followers =&gt; <span class="builtin-name">Set</span> of ids of followers of current user</div><div class="line">User:id:1000:following =&gt; <span class="builtin-name">Set</span> of ids of followees of current user</div></pre></td></tr></table></figure>
<h2 id="The-core-code-for-the-above"><a href="#The-core-code-for-the-above" class="headerlink" title="The core code for the above:"></a><a href="#The-core-code-for-the-above" title="The core code for the above:"></a>The core code for the above:</h2><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_friend</span></span></div><div class="line">  redis.sadd(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:self_id</span>]&#125;</span>:followees"</span>, params[<span class="symbol">:followee_id</span>])</div><div class="line">  redis.sadd(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:followee_id</span>]&#125;</span>:followers"</span>, params[<span class="symbol">:self_id</span>] )</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="Post"><a href="#Post" class="headerlink" title="Post"></a><a href="#Post" title="Post"></a>Post</h2><p>The most important part of our case is to add the post to every user and display it in the user’s page. Not only saving your own posts but also getting your friends’ tweets on your page. Using the same strategy for saving User data, we also associate a unique ID to every user to identify users inside our system.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">INCR <span class="keyword">post</span>:id =&gt; 1</div><div class="line"><span class="keyword">SET</span> <span class="keyword">post</span>:1 <span class="string">"My first tweet!"</span></div></pre></td></tr></table></figure>
<p>Then we use the Redis data type “List” to save every post_id. Introduction from reids.io:</p>
<blockquote>
<p>Redis Lists are simply lists of strings, sorted by insertion order. It is possible to add elements to a Redis List pushing new elements on the head (on the left) or on the tail (on the right) of the list.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ user:id:<span class="number">1000</span>:<span class="function"><span class="params">posts</span> =&gt;</span> List <span class="keyword">of</span> post ids</div></pre></td></tr></table></figure>
<p>The core code:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_post</span></span></div><div class="line">  redis = Redis.current</div><div class="line">  post_id = redis.incr(<span class="string">"Post:Id"</span>)</div><div class="line">  redis.set(<span class="string">"post:<span class="subst">#&#123;post_id&#125;</span>"</span>, params[<span class="symbol">:post</span>])</div><div class="line">  redis.rpush(<span class="string">"posts"</span>, post_id)</div><div class="line">  redis.sadd(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:id</span>]&#125;</span>:posts"</span>, post_id)</div><div class="line">  redis.smembers(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:id</span>]&#125;</span>:followers"</span>).each <span class="keyword">do</span> <span class="params">|follower|</span></div><div class="line">    redis.sadd(<span class="string">"user:id:<span class="subst">#&#123;follower&#125;</span>:mentions"</span>, post_id)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><img src="/images/case-2.png" alt=""></p>
<h2 id="Following-users"><a href="#Following-users" class="headerlink" title="Following users"></a><a href="#Following-users" title="Following users"></a>Following users</h2><p>There are more than Lists. Redis also supports Sets that are unsorted collections of elements. It is possible to add, remove, and test for the existence of members and perform intersections between different Sets. If user id 1000 (Eric) wants to follow user id 1001 (Yuan), we can do this with just two SADD:</p>
<pre><code>SADD user:id:1000:following 1001
SADD user:id:1001:followers 1000
</code></pre><p>And remove a friend is much like to following a user. It should be pointed out that we will lose a follower when your follower “removes” you. The core code below:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove_friend</span></span></div><div class="line">  redis.srem(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:self_id</span>]&#125;</span>:followees"</span>, params[<span class="symbol">:follower_id</span>])</div><div class="line">  redis.srem(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:follower_id</span>]&#125;</span>:followers"</span>, params[<span class="symbol">:self_id</span>])</div><div class="line">  remove_ids= redis.smembers(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:follower_id</span>]&#125;</span>:posts"</span>)</div><div class="line">  remove_ids.each <span class="keyword">do</span> <span class="params">|id|</span></div><div class="line">    redis.srem(<span class="string">"user:id:<span class="subst">#&#123;params[<span class="symbol">:self_id</span>]&#125;</span>:mentions"</span>, id) </div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Here is a screenshot of string value we save in Redis:</p>
<p><img src="/images/case-3.png" alt=""></p>
<p><code>TechForce</code> is a weekly meeting held at The Plant for developers to present and discuss new technologies and projects they are working on. Each week a different developer presents.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shaorui23.github.io/2011/10/21/服装企业需求调研的几点总结/服装企业需求调研的几点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/672563?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eric's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/10/21/服装企业需求调研的几点总结/服装企业需求调研的几点总结/" itemprop="url">服装企业需求调研的几点总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-10-21T13:23:45+08:00">
                2011-10-21
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2011/10/21/服装企业需求调研的几点总结/服装企业需求调研的几点总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2011/10/21/服装企业需求调研的几点总结/服装企业需求调研的几点总结/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span itemprop="articleBody"></span></p>
<p>在这两年的调研中，发现服装类企业的信息化程度相对薄弱。主要原因归结于该类企业管理人自身对于实施信息化管理的认识不够深，也和这个行业默认的“Excel闯天下”的理念有很大关系。这里是几点总结，发现是老生常谈了，不过还是再分享一下吧。</p>
<h2 id="需求调研的几点总结："><a href="#需求调研的几点总结：" class="headerlink" title="需求调研的几点总结："></a><a href="#需求调研的几点总结：" title="需求调研的几点总结："></a>需求调研的几点总结：</h2><p>　　获取公司的业务需求是我们后期系统设计、开发成功的保障。我们学生团队的调研经验相对更少，而且考虑问题容易趋向于“我们在做课程设计”的思想轨迹，对需求的重要性理解得不够深。因此希望能在需求调研过程中有几个关键需要把握到：</p>
<h3 id="1-警惕主观因素，时常问自己：这有跟客户确认过吗"><a href="#1-警惕主观因素，时常问自己：这有跟客户确认过吗" class="headerlink" title="1. 警惕主观因素，时常问自己：这有跟客户确认过吗"></a><a href="#1-警惕主观因素，时常问自己：这有跟客户确认过吗" title="1\.  警惕主观因素，时常问自己：这有跟客户确认过吗"></a>1. 警惕主观因素，时常问自己：这有跟客户确认过吗</h3><p>　　在需求调研的任何一个阶段，我们都会进行类似的这样一个过程：即从客户那里获得基础资料后，我们去研究，串联并充分理解这些基础资料，进而形成自己的一份文档（或图），该文档能够代表我们对业务流程的认识。自己吸收并深化对业务的认识是十分必要的，但要注意的是这个阶段很容易参杂入我们的主观因素，不管这种主观因素是多么的合理，也要时常问自己：“这有跟客户确认过吗？”。</p>
<p>甚至有些时候，客户都没有尝试过的做法，我们会自己臆想的出一套觉得“适合”的方案。这种业务，我们不IT化。</p>
<h3 id="2-调研对象必须落实到最终用户，不是其上级或同事"><a href="#2-调研对象必须落实到最终用户，不是其上级或同事" class="headerlink" title="2. 调研对象必须落实到最终用户，不是其上级或同事"></a><a href="#2-调研对象必须落实到最终用户，不是其上级或同事" title="2\.  调研对象必须落实到最终用户，不是其上级或同事"></a>2. 调研对象必须落实到最终用户，不是其上级或同事</h3><p>　　也就是系统所涉及的各个流程的人员尽可能都调研到。</p>
<p>　　最终用户指所要调研的业务的直接参与者。作为参与者每天都接触的业务，其能够提供更全面的信息，并能更快纠正你的错误理解。并且由于其也是系统的最终使用者，了解其工作内容，工作方式和意见，显得十分必要。在调研期间，我们在某些业务上没能达到这个原则，导致需求出现偏差，继而设计阶段偏离了现实，到开发后期不得不返工重新修改。</p>
<h3 id="3-保持心态"><a href="#3-保持心态" class="headerlink" title="3. 保持心态"></a><a href="#3-保持心态" title="3\.  保持心态"></a>3. 保持心态</h3><p>　　在调研过程中容易出现双方对需求理解不一致，造成需求调研前后矛盾；或者需求调研之后出现需求更改，双方不认同的想象。当然，我们的心态也相应出现不同程度的急躁和不悦。而对于更复杂的需求，会有“躲事”的想法。</p>
<p>　　保持一种和客户积极合作的心态，确定需求调研是为了给客户解决问题，探讨问题，和客户达成共识。谨记“我们一起解决问题”这个原则，心平气和的去引导客户。</p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://shaorui23.github.io/2011/09/15/Redis-and-Ruby-译文/Redis-and-Ruby-译文/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/672563?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Eric's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2011/09/15/Redis-and-Ruby-译文/Redis-and-Ruby-译文/" itemprop="url">Redis-and-Ruby-译文</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2011-09-15T12:37:06+08:00">
                2011-09-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2011/09/15/Redis-and-Ruby-译文/Redis-and-Ruby-译文/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2011/09/15/Redis-and-Ruby-译文/Redis-and-Ruby-译文/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Redis-and-Ruby-译文"><a href="#Redis-and-Ruby-译文" class="headerlink" title="Redis and Ruby (译文)"></a>Redis and Ruby (译文)</h1><p><em>原文地址：<a href="http://www.programmersparadox.com/2009/06/02/redis-and-ruby/" target="_blank" rel="external">http://www.programmersparadox.com/2009/06/02/redis-and-ruby/</a></em></p>
<p>在五月份的一次 raleigh.rb 聚会中， Kevin Smith进行了一次关于多形式数据库的演讲，其中包括著名的 CouchDB 和 Redis。</p>
<p>这一次的演讲让我确信Redis将会是支持 getencouraged（一个小型的类似twitter的项目）最好的数据库系统了。</p>
<p>Redis是一种加速的key-value数据库，特别适合这种只需要保存tweets的小型twitter项目。作为Ruby世界的新鲜事物，我之前没有遇到过这样的阻碍让我如此沮丧，而这些问题同样也会摆在其他人面前。其中一个障碍是我对ruby中gem的系统机制理解不够深入，而且找不到一个关于Redis的gem能够让我轻松的gem install去使用。这意味着我必须知道如何用代码从github上安装Redis ruby的客户端开发包到本地。想到读者们也许也会像我这样对它们犯迷糊，我在这里列举出使用redis-rb客户端开发包来安装Redis和redis gem到本地系统的步骤。<br>第一步，从github上下载redis-rb客户端开发包，地址如下：<br><a href="http://github.com/ezmobius/redis-rb/tree/master" target="_blank" rel="external">http://github.com/ezmobius/redis-rb/tree/master</a></p>
<p>网上也有其他的Redis Ruby客户端开发包，但由于我之前用过redis-rb，所以我推荐使用它。为什么不直接从Redis开始，而是从一个Redis的客户端开始呢？因为redis-rb提供了rake任务已经可以帮你安装Redis了。当然你也可以不用rake任务来安装Redis。</p>
<p>一旦你下载了redis-rb，把它解压好了，然后在你的终端上键入cd 进入目录。如果你的系统还未安装rspec gem，请安装它：</p>
<p><code>sudo gem install rspec</code></p>
<p>现在执行rake的命令安装Redis：</p>
<p><code>rake redis:install</code></p>
<p>执行上面的命令会将Redis安装到/usr/bin目录。Redis的配置文件redis.conf位于/etc目录。你能够通过执行 /usr/bin/redis-server 来启动Redis服务器。因为Redis会提供默认的配置文件，所以通常情况下不需要设置它；不过推荐去打开这个文件看看，它里面有许多值得探究的地方。<br>接下来，redis-rb需要你安装dtach，执行下面命令：</p>
<p><code>rake dtach:install</code></p>
<p>键入以上命令将dtach安装到 /usr/bin/目录下。除此之外你不必关心dtach了，只需要保证它已经在系统里面，以便redis-rb能够找到它。</p>
<p>最后一个步骤是安装redis-rb gem，让它能在你的代码中使用。这一步很简单：</p>
<p><code>rake gem</code></p>
<p>这个命令目的是把redis-rb gem打包放在当前文件夹下面。如果你已经进入了这个打包后的目录，你就可以安装这个gem了：</p>
<p><code>sudo gem install redis</code></p>
<p><em>注意：虽然在github的repo上是叫做redis-rb,但repo创建的gem叫做redis。</em></p>
<p>这样，你不仅把Redis安装到你的系统，而且也能够通过redis gem利用ruby代码连接Redis了。这里有几个例子帮你把程序跑起来（这里的例子是基于github上的redis-rb repo的，你也可以在这个项目里找到更多的例子）：</p>
<p>把代码保存到文件里面，然后在你的机子上开启Redis（/usr/bin/redis-server），执行代码，见证它的魔术戏法吧。希望能够帮助你开启Redis之旅，Enjoy！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/672563?v=3&s=460"
               alt="Eric Wang" />
          <p class="site-author-name" itemprop="name">Eric Wang</p>
           
              <p class="site-description motion-element" itemprop="description">Focus</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eric Wang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"shaorui23"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  














  





  

  

  

  

  

  

</body>
</html>
